#+title: Personal Nix Configuration

This is my personal Nix configuration used on MacOS.

* Prerequisites
  1. install [[https://nixos.org/manual/nix/stable/#sect-macos-installation][nix]]
  2. install [[https://github.com/LnL7/nix-darwin][nix-darwin]]
  3. and channel for home-manager
#+begin_src bash
nix-channel --add https://github.com/nix-community/home-manager/archive/master.tar.gz home-manager

nix-channel --update  
#+end_src
     

=note:=
you don't need to install home-manger, nix-darwin will install it instead.

* Setup (Darwin)
- Clone this to ~$HOME/src/nix~

#+begin_src  bash
cd $HOME/src && git clone https://github.com/Eason0210/nix.git 
#+end_src

- Change all the username(aqua0210 is my username) in ~darwin.nix~ and ~home.nix~

- Remove apps you don't need in ~packages.nix~

- Check all the config is good for you and run this command in terminal.

#+begin_src bash
darwin-rebuild switch  
#+end_src

* Other useful commands
#+begin_src bash
  darwin-rebuild --list-generations # list all generations
  darwin-rebuild --rollback # rollback to previous generation
  nix-collect-garbage -d    # remove all other generations except current one
#+end_src


  
